<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>

    <link rel="stylesheet" type="text/css" href="css/jquery.treeview.css" />
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>    
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>

    <script src="js/editor/map.editor.js"></script>
    <script src="js/jquery.treeview.min.js"></script>
    <script src="js/pixi.js"></script>
    <script src="js/ace/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>


    <style>
        #mapEdit {
            width: 90%;
            height: 100%;
            margin: auto;
            padding: 10px;
        }

        div#tree {
            width: 15%;
            height: 100%;
            float: left;
        }

        div#tabs {
            width: 80%;
            float: left;
        }

        div#editor {
            height: 600px;
        }

        div#map {
            height: 600px;
        }
    </style>

    <script>
        $(document).ready(function () {

            // UI
            $("#tabs").tabs();

            $("#explorer").treeview({
                animated: "fast"
            });

            //var editor = ace.edit("editor");
            //editor.getSession().setMode("ace/mode/javascript");
            
            $.ajax({
                type: "GET",
                url: "map.json",
                dataType: "text",
                contentType: "text/plain; charset=utf-8",
                success: function (data, textStatus) {
                    $("#editor").text(data);
                    var editor = ace.edit("editor");
                    Map.init("map", JSON.parse(data));
                    Map.create(30, 30);
                },
                error: function (data) {
                    alert("error");
                }
            });

        });

        

        
    </script>

</head>
<body>

    <section id="mapEdit">
        <div id="tree">
            <ul id="explorer" class="filetree">
                <li>
                    <span class='folder'>Server</span>
                    <ul>
                        <li><span class='file'>File 1</span></li>
                        <li><span class='file'>File 2</span></li>
                        <li><span class='file'>File 3</span></li>
                    </ul>
                </li>
                <li>
                    <span class='folder'>Client</span>
                    <ul>
                        <li><span class='file'>map.json</span></li>
                        <li><span class='file'>index.html</span></li>
                        <li><span class='file'>engine.js</span></li>
                    </ul>
                </li>
            </ul>
        </div>

        <div id="tabs">
            <ul>
                <li><a href="#editor">Raw Text</a></li>
                <li><a href="#map">Map Editor</a></li>
            </ul>
            <div id="editor"></div>
            <div id="map"></div>
        </div>
</section>
    

</body>
</html>
